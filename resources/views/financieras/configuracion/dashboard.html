{% extends "layout/layout_financieras.html" %}
{% block title %}Configuraci√≥n y Administraci√≥n{% endblock %}

{% block content %}
<style>
    .config-card {
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
    }
    .config-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
    .config-card.primary { border-left-color: #3b82f6; }
    .config-card.success { border-left-color: #10b981; }
    .config-card.warning { border-left-color: #f59e0b; }
    .config-card.info { border-left-color: #8b5cf6; }
    
    .stat-badge {
        display: inline-block;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
    }
</style>

<div class="bg-white rounded-xl shadow-lg p-8">
    <!-- Header -->
    <div class="mb-8">
        <h2 class="text-3xl font-bold mb-2">‚öôÔ∏è Configuraci√≥n y Administraci√≥n</h2>
        <p class="text-gray-600">Gestiona los par√°metros y configuraci√≥n de tu sistema financiero</p>
    </div>

    <!-- Estad√≠sticas R√°pidas -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
        <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-5 rounded-lg border-l-4 border-blue-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600 mb-1">Total Clientes</p>
                    <p class="text-3xl font-bold text-blue-700">{{ stats.total_clientes }}</p>
                </div>
                <div class="text-4xl">üë•</div>
            </div>
        </div>

        <div class="bg-gradient-to-br from-green-50 to-green-100 p-5 rounded-lg border-l-4 border-green-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600 mb-1">Evaluaciones</p>
                    <p class="text-3xl font-bold text-green-700">{{ stats.total_evaluaciones }}</p>
                </div>
                <div class="text-4xl">üìã</div>
            </div>
        </div>

        <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-5 rounded-lg border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600 mb-1">Total Pagos</p>
                    <p class="text-3xl font-bold text-purple-700">{{ stats.total_pagos }}</p>
                </div>
                <div class="text-4xl">üí∞</div>
            </div>
        </div>

        <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-5 rounded-lg border-l-4 border-orange-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600 mb-1">Cat√°logos Activos</p>
                    <p class="text-3xl font-bold text-orange-700">{{ stats.metodos_pago_count + stats.estados_credito_count }}</p>
                </div>
                <div class="text-4xl">üìö</div>
            </div>
        </div>
    </div>

    <!-- Configuraci√≥n Actual (Resumen) -->
    <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg p-6 mb-8 shadow-md">
        <h3 class="text-xl font-bold mb-4">üìä Configuraci√≥n Actual</h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="bg-white bg-opacity-20 p-4 rounded">
                <p class="text-sm opacity-90">Tasa de Inter√©s Anual</p>
                <p class="text-2xl font-bold">{{ config.tasa_interes_anual|default(18.0) }}%</p>
            </div>
            <div class="bg-white bg-opacity-20 p-4 rounded">
                <p class="text-sm opacity-90">Rango de Plazos</p>
                <p class="text-2xl font-bold">{{ config.plazo_minimo_meses|default(6) }}-{{ config.plazo_maximo_meses|default(60) }} meses</p>
            </div>
            <div class="bg-white bg-opacity-20 p-4 rounded">
                <p class="text-sm opacity-90">Monto M√≠nimo</p>
                <p class="text-2xl font-bold">${{ "{:,.0f}".format(config.monto_minimo|default(5000)) }}</p>
            </div>
            <div class="bg-white bg-opacity-20 p-4 rounded">
                <p class="text-sm opacity-90">Score M√≠nimo</p>
                <p class="text-2xl font-bold">{{ config.score_minimo_aprobacion|default(650) }}</p>
            </div>
        </div>
    </div>

    <!-- Tarjetas de M√≥dulos -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <!-- Configuraci√≥n General -->
        <a href="{{ url_for('routes.configuracion_general') }}" class="config-card primary bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">‚öôÔ∏è</div>
                <h3 class="text-xl font-bold text-gray-800">Configuraci√≥n General</h3>
            </div>
            <p class="text-gray-600 mb-4">Tasas de inter√©s, plazos, montos, comisiones y par√°metros principales del sistema.</p>
            <div class="flex items-center text-blue-600 font-semibold">
                <span>Configurar</span>
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
        </a>

        <!-- Cat√°logos -->
        <a href="{{ url_for('routes.catalogos') }}" class="config-card success bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">üìö</div>
                <h3 class="text-xl font-bold text-gray-800">Gesti√≥n de Cat√°logos</h3>
            </div>
            <p class="text-gray-600 mb-4">Administra m√©todos de pago, estados de cr√©dito, tipos de garant√≠a y otros cat√°logos.</p>
            <div class="flex items-center justify-between">
                <span class="stat-badge bg-green-100 text-green-700">
                    {{ stats.metodos_pago_count + stats.estados_credito_count }} activos
                </span>
                <div class="flex items-center text-green-600 font-semibold">
                    <span>Gestionar</span>
                    <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
        </a>

        <!-- Auditor√≠a -->
        <a href="{{ url_for('routes.auditoria') }}" class="config-card warning bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">üìä</div>
                <h3 class="text-xl font-bold text-gray-800">Auditor√≠a y Logs</h3>
            </div>
            <p class="text-gray-600 mb-4">Revisa el historial de cambios, acciones de usuarios y movimientos del sistema.</p>
            <div class="flex items-center text-orange-600 font-semibold">
                <span>Ver registros</span>
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
        </a>

        <!-- Respaldos (Placeholder) -->
        <div class="config-card info bg-white rounded-lg shadow-md p-6 opacity-75 cursor-not-allowed">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">üíæ</div>
                <h3 class="text-xl font-bold text-gray-800">Respaldos</h3>
            </div>
            <p class="text-gray-600 mb-4">Genera y gestiona respaldos de tu informaci√≥n (Pr√≥ximamente).</p>
            <div class="flex items-center text-gray-400 font-semibold">
                <span>Pr√≥ximamente</span>
            </div>
        </div>

        <!-- Notificaciones (Placeholder) -->
        <div class="config-card primary bg-white rounded-lg shadow-md p-6 opacity-75 cursor-not-allowed">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">üìß</div>
                <h3 class="text-xl font-bold text-gray-800">Notificaciones</h3>
            </div>
            <p class="text-gray-600 mb-4">Configura alertas por email y notificaciones autom√°ticas (Pr√≥ximamente).</p>
            <div class="flex items-center text-gray-400 font-semibold">
                <span>Pr√≥ximamente</span>
            </div>
        </div>

        <!-- Reportes (Placeholder) -->
        <div class="config-card success bg-white rounded-lg shadow-md p-6 opacity-75 cursor-not-allowed">
            <div class="flex items-center mb-4">
                <div class="text-4xl mr-4">üìà</div>
                <h3 class="text-xl font-bold text-gray-800">Reportes</h3>
            </div>
            <p class="text-gray-600 mb-4">Genera reportes personalizados y exporta informaci√≥n (Pr√≥ximamente).</p>
            <div class="flex items-center text-gray-400 font-semibold">
                <span>Pr√≥ximamente</span>
            </div>
        </div>
    </div>

    <!-- Informaci√≥n Adicional -->
    <div class="bg-gray-50 border-l-4 border-blue-500 p-6 rounded">
        <h4 class="font-bold text-lg mb-2 text-gray-800">üí° Sugerencias</h4>
        <ul class="space-y-2 text-gray-700">
            <li>‚Ä¢ Revisa y ajusta la configuraci√≥n general seg√∫n las necesidades de tu financiera</li>
            <li>‚Ä¢ Mant√©n actualizados los cat√°logos para facilitar la captura de informaci√≥n</li>
            <li>‚Ä¢ Consulta regularmente la auditor√≠a para detectar actividades inusuales</li>
            <li>‚Ä¢ Las tasas de inter√©s y comisiones se aplican autom√°ticamente en nuevas evaluaciones</li>
        </ul>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
{% endblock %}